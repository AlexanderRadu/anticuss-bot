# AntiCuss Bot

Telegram-бот для модерации групповых чатов. Бот автоматически удаляет сообщения с нецензурной лексикой, поддерживает списки запрещенных слов, ведет статистику нарушений и предоставляет инструменты администрирования.

##  Возможности

*   **Фильтрация ненормативной лексики**:
    *   Использует базу слов (включая морфологический анализ через `pymorphy3`).
    *   Распознает "завуалированный" мат (leetspeak), например замену букв на цифры или похожие символы (3 -> з, @ -> а).
    *   Использует нечеткое сравнение строк (`rapidfuzz`) для поиска измененных слов.
*   **Белый список**: Исключает ложные срабатывания для обычных слов (например, "страховать", "употреблять").
*   **Администрирование**:
    *   Бан/разбан пользователей (бот удаляет все сообщения от забаненных).
    *   Добавление и удаление собственных запрещенных слов.
*   **Статистика**:
    *   Подсчет количества нарушений.
    *   Генерация графиков с топом нарушителей (`matplotlib`).

##  Технологии

*   [Python 3.x](https://www.python.org/)
*   [aiogram 3.x](https://docs.aiogram.dev/) — фреймворк для Telegram Bot API
*   [SQLite](https://www.sqlite.org/) — база данных
*   [pymorphy3](https://pypi.org/project/pymorphy3/) — морфологический анализатор
*   [rapidfuzz](https://github.com/maxbachmann/RapidFuzz) — нечеткий поиск строк
*   [matplotlib](https://matplotlib.org/) & [pandas](https://pandas.pydata.org/) — визуализация статистики

##  Установка и запуск

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/AlexanderRadu/anticuss-bot.git
    cd anticuss-bot
    ```

2.  **Установите зависимости:**
    Рекомендуется использовать виртуальное окружение.
    ```bash
    pip install -r requirements.txt
    ```

3.  **Настройте переменные окружения:**
    Создайте файл `.env` в корне проекта и добавьте токен вашего бота:
    ```env
    BOT_TOKEN=ваш_токен_от_botfather
    ```

4.  **Запустите бота:**
    ```bash
    python src/main.py
    ```
    
    **Либо используйте:**
    ```bash
    docker compose up
    ```

##  Команды

Бот работает только в групповых чатах. Для работы административных команд требуются права администратора в чате.

### Основные
*   `/start` — Инициализация бота в группе (добавление в БД).
*   `/help` — Список всех команд.
*   `/info` — Показать статистику нарушений и график топа групп.
*   `/stop` — Приостановить работу бота в чате.

### Администрирование (только для админов)
*   `/ban @username` — Добавить пользователя в черный список (его сообщения будут удаляться).
*   `/unban @username` — Убрать пользователя из черного списка.
*   `/banlist` — Показать список забаненных пользователей.
*   `/add [слово]` — Добавить слово в список запрещенных для текущего чата.
*   `/del [слово]` — Удалить слово из списка запрещенных.
*   `/banwords` — Показать список добавленных запрещенных слов.

##  Структура проекта

*   `src/main.py` — Точка входа.
*   `src/config.py` — Конфигурация, словари замен и базовый список плохих слов.
*   `src/database.py` — Работа с SQLite.
*   `src/handlers/` — Обработчики команд (admin, basic, monitor).
*   `src/utils/` — Вспомогательные функции (проверка админа, генерация графиков).